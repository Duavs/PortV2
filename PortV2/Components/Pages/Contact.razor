@page "/contact"

<div style="display: flex; flex-direction: column; gap: 20px; max-width: 600px; margin: auto;">

    <!-- Contact Form -->
    <div style="padding: 20px; background: #f9f9f9; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
        <h4>Send me a message</h4>
        <input @bind="user" placeholder="Your Name" style="width:100%; padding:10px; margin-bottom:10px;" />
        <input @bind="email" placeholder="Your Email" style="width:100%; padding:10px; margin-bottom:10px;" />
        <textarea @bind="message" placeholder="Your Message" rows="4" style="width:100%; padding:10px; margin-bottom:10px;"></textarea>
        <button @onclick="SendMessage" style="padding:10px 15px; background-color:#007bff; color:#fff; border:none; border-radius:4px; cursor:pointer;">
            Send
        </button>
    </div>

    <!-- Chat Section (for SignalR) -->
    <div style="padding: 20px; background: #ffffff; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
        <h4>Live Chat</h4>
        <ul style="list-style:none; padding:0; max-height:300px; overflow-y:auto; border:1px solid #ddd; border-radius:4px; margin-bottom:10px;">
            @foreach (var msg in messages)
            {
                <li style="padding:8px; border-bottom:1px solid #eee;">@msg</li>
            }
        </ul>
        <div style="display:flex; gap:10px;">
            <input @bind="chatMessage" placeholder="Type a message..." style="flex:1; padding:10px;" />
            <button @onclick="SendChatMessage" style="padding:10px 15px; background-color:#28a745; color:#fff; border:none; border-radius:4px; cursor:pointer;">
                Send
            </button>
        </div>
    </div>

</div>

@code {
    private string? user;
    private string? email;
    private string? message;

    private string? chatMessage;
    private List<string> messages = new();

    private async Task SendMessage()
    {
        // TODO: Implement SignalR message sending for contact form
        messages.Add($"[Contact Form] {user} ({email}): {message}");
    }

    private async Task SendChatMessage()
    {
        if (!string.IsNullOrWhiteSpace(chatMessage))
        {
            // TODO: Implement SignalR real-time chat sending
            messages.Add($"{user ?? "Anonymous"}: {chatMessage}");
            chatMessage = string.Empty;
        }
    }
}